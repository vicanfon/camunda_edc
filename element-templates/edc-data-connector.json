{
  "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
  "name": "EDC Data Connector",
  "id": "io.camunda.connector.EdcData.v1",
  "version": 1,
  "description": "Connect to Eclipse Dataspace Components (EDC) to retrieve data from a specific asset",
  "documentationRef": "https://eclipse-edc.github.io/documentation/",
  "icon": {
    "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 18 18'%3E%3Cpath fill='%23505050' d='M9,1.5c-4.1,0-7.5,3.4-7.5,7.5s3.4,7.5,7.5,7.5s7.5-3.4,7.5-7.5S13.1,1.5,9,1.5z M9,14.5c-3,0-5.5-2.5-5.5-5.5 S6,3.5,9,3.5s5.5,2.5,5.5,5.5S12,14.5,9,14.5z'/%3E%3Cpath fill='%23505050' d='M9,5.5c-0.3,0-0.5,0.2-0.5,0.5v3c0,0.1,0,0.3,0.1,0.4l2,2c0.2,0.2,0.5,0.2,0.7,0c0.2-0.2,0.2-0.5,0-0.7 l-1.8-1.8V6C9.5,5.7,9.3,5.5,9,5.5z'/%3E%3C/svg%3E"
  },
  "category": {
    "id": "connectors",
    "name": "Connectors"
  },
  "appliesTo": [
    "bpmn:Task"
  ],
  "elementType": {
    "value": "bpmn:ServiceTask"
  },
  "groups": [
    {
      "id": "authentication",
      "label": "Authentication"
    },
    {
      "id": "endpoint",
      "label": "EDC Endpoint Configuration"
    },
    {
      "id": "asset",
      "label": "Asset Configuration"
    },
    {
      "id": "output",
      "label": "Output Mapping"
    }
  ],
  "properties": [
    {
      "type": "Hidden",
      "value": "io.camunda:edc-connector:1",
      "binding": {
        "type": "zeebe:taskDefinition:type"
      }
    },
    {
      "label": "EDC Management API URL",
      "description": "The base URL of your EDC connector's management API (e.g., http://localhost:9193/management)",
      "group": "endpoint",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "edcManagementUrl"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "EDC API Key",
      "description": "The API key for authenticating with your EDC connector",
      "group": "authentication",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "edcApiKey"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Provider Connector URL",
      "description": "The protocol endpoint URL of the provider's EDC connector (e.g., http://provider:8282/api/v1/dsp)",
      "group": "endpoint",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "providerUrl"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Asset ID",
      "description": "The ID of the asset you want to retrieve from the provider's catalog",
      "group": "asset",
      "type": "String",
      "feel": "optional",
      "binding": {
        "type": "zeebe:input",
        "name": "assetId"
      },
      "constraints": {
        "notEmpty": true
      }
    },
    {
      "label": "Result Variable",
      "description": "Name of variable to store the result. Response includes: success, assetId, agreementId, transferProcessId, data, errorMessage",
      "group": "output",
      "type": "String",
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultVariable"
      }
    },
    {
      "label": "Result Expression",
      "description": "Expression to map the response into process variables (e.g., ={edcData: response.data, success: response.success})",
      "group": "output",
      "type": "Text",
      "feel": "required",
      "optional": true,
      "binding": {
        "type": "zeebe:taskHeader",
        "key": "resultExpression"
      }
    }
  ]
}
